---
- hosts: jenkins-osx-slaves
  become: True
  tasks:
    - name: 'uninstall awscli'
      pip:
        name: 'awscli'
        state: absent
    - name: 'uninstall pip'
      pip:
        name: 'pip'
        state: absent
    - name: 'remove jenkins user'
      user:
        name: 'jenkins'
        state: absent
    - name: 'remove jenkins group'
      group:
        name: 'jenkins'
        state: absent
    - name: 'remove jenkins user home directory'
      file:
        path: /Users/jenkins
        state: absent
    - name: 'uninstall java'
      homebrew_cask:
        name: homebrew/cask-versions/adoptopenjdk8
        state: absent
      become: yes
      become_user: qamaidsafe
    - name: 'uninstall caskroom/versions'
      homebrew_tap:
        name: homebrew/cask-versions
        state: absent
